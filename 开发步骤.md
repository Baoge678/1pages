# RemixPages 开发计划

## 第一阶段：基础项目搭建 (3-4天)

### 步骤 1：项目初始化 (1天)
- 【已完成✅】初始化项目结构。

- 配置 TypeScript：
  - 【已完成✅】`tsconfig.json`：设置 TypeScript 编译选项，确保类型检查。

- 设置 Git 仓库：
  - 【已完成✅】`.gitignore`：添加需要忽略的文件和目录，避免不必要的文件纳入版本控制。
 
- 测试项目：
  - 【已完成✅】`pnpm dev`：启动开发服务器，测试项目是否正常运行。
  - 【已测试✅】在edgeone pages中实测正常

### 步骤 2：基础开发环境配置 (1天)
- 【已完成✅】配置 Tailwind CSS：
  - `tailwind.config.ts`：自定义 Tailwind 主题，包括颜色、默认字体，不依赖外部字体等。
  - `app/styles/tailwind.css`：引入 Tailwind 基础样式，确保全局生效。

- 创建基础目录结构：
  ```
  app/
  ├── components/     # 可复用的 UI 组件
  │   ├── core/       # 核心组件
  │   ├── layout/    # 布局组件，用于页面结构，如导航栏、页脚
  │   └── shared/     # 共享组件，跨多个页面使用
  ├── routes/         # 路由组件，负责页面显示
  │   └── _index.tsx  # 首页路由(不能改变)
  ├── styles/         # 样式文件，包含 Tailwind 配置和自定义样式
  ├── utils/          # 工具函数和辅助方法
  ├── lib/            # 核心库文件，如数据处理和服务接口
  └── types/          # TypeScript 类型定义
  ```

- 测试项目：
  - 【已测试✅】在edgeone pages中实测正常
  - 【已测试✅】`pnpm dev`：启动开发服务器，测试项目是否正常运行。

### 步骤 3：首页及布局开发 (1-2天)
- 【已完成✅】3.1.开发基础布局组件：
  - `app/components/layouts/RootLayout.tsx`：定义全局布局，包括头部、主内容区和页脚。
  - `app/components/core/Navigation.tsx`：实现响应式导航栏，包含网站主要链接。
  - `app/components/core/Footer.tsx`：设计并实现页脚，包含版权信息和社交链接。

  这些组件实现了以下功能:
  - 响应式布局
  - 深色模式支持
  - 基础导航功能
  - 页脚信息展示
  - 移动端适配

- 【已完成✅】3.2.实现首页：
  - `app/routes/index.tsx`：设置首页路由，确保访问根路径时加载首页组件。
  - `app/components/home/HomePage.tsx`：创建首页组件，展示欢迎信息和最新文章预览。

  这些更新实现了:
    - 完整的首页布局和内容
    - 响应式设计
    - 移动端菜单的展开/收起功能
    - 更丰富的页脚信息和社交链接
    - 深色模式支持
    - SEO友好的meta标签

  后续可以继续优化:
  - 添加主题切换按钮
  - 实现文章数据的动态加载
  - 添加搜索功能
  - 优化动画效果
  - 添加国际化支持

- 测试项目：
  - 【已测试✅】在edgeone pages中实测正常
  - 【已测试✅】`pnpm dev`：启动开发服务器，测试项目是否正常运行。

## 第二阶段：核心博客功能

### 步骤 4：文章系统开发
- 4.1 【已完成✅】实现 Markdown 解析：
  - `app/lib/mdx.server.ts`：配置 MDX 解析器，支持 Markdown 和 React 组件的解析。
  - `app/components/MDXComponents.tsx`：自定义 MDX 组件，如代码高亮、图片展示等。

提供了以下功能:
MDX解析器(mdx.server.ts)功能:
支持GitHub Flavored Markdown(GFM)
自动生成目录(TOC)
代码块语法高亮
为标题自动添加id(用于目录跳转)
完整的错误处理
MDX组件(MDXComponents.tsx)功能:
智能链接处理(内部链接、锚点链接、外部链接)
优化的图片显示(懒加载、圆角、说明文字)
可扩展的组件系统

使用说明:
在路由组件中使用MDX解析:
```
import { compileMDX } from '~/lib/mdx.server'
import { MDXComponents } from '~/components/MDXComponents'

// 在loader中使用
const { code, frontmatter } = await compileMDX({
  source: markdownContent
})
```
渲染MDX内容:
```
import { getMDXComponent } from 'mdx-bundler/client'

const Component = getMDXComponent(code)
return <Component components={MDXComponents} />
```

主要优化和完善点:
MDX解析器(mdx.server.ts):
添加缓存机制,提高性能
自动计算阅读时间
自动生成文章摘要
优化错误处理
支持生产环境代码压缩
完善目录生成配置
改进代码高亮配置
MDX组件(MDXComponents.tsx):
增加更多自定义组件(标题、代码块等)
改进样式处理
添加无障碍支持
优化图片加载体验
添加交互效果
完善暗色模式支持

- 4.2 【已完成✅】 开发文章列表和详情：
  - `app/routes/posts.tsx`：创建文章列表页，展示所有博客文章的摘要。
  - `app/routes/posts.$slug.tsx`：实现文章详情页，根据文章 slug 动态加载内容。
  - `app/components/posts/PostCard.tsx`：设计文章卡片组件，显示文章标题、摘要和发布日期。
  - `app/components/posts/PostContent.tsx`：展示文章的完整内容，支持 MDX 格式。

  待优化和完善点:
  - 添加缓存控制
  - 实现预加载策略
  - 添加分页支持
  - 实现文章排序和筛选
  - 添加文章统计功能
  - 实现相关文章推荐

- 4.3 【】实现文章目录：
  - `app/lib/toc.ts`：编写目录生成逻辑，解析文章中的标题并生成目录结构。
  - `app/components/posts/TableOfContents.tsx`：创建目录组件，提供快速跳转到文章不同部分的功能。

现在让我们来总结一下步骤4中已经实现的功能和模块：
1. 文章内容处理系统
MDX解析和编译
目录自动生成
阅读时间计算
摘要自动提取
代码高亮支持
标题锚点生成
2. 文章展示系统
文章列表页
文章详情页
文章卡片组件
文章内容组件
目录导航组件
3. 类型系统
文章类型定义
目录结构类型
组件 Props 类型
4. MDX组件系统
自定义链接处理
图片优化展示
标题层级处理
代码块美化
5. 主要流程：
文章加载流程：
graph LR
  A[MDX文件] --> B[MDX解析器]
  B --> C[提取元数据]
  B --> D[生成目录]
  B --> E[计算阅读时间]
  C --> F[渲染页面]
  D --> F
  E --> F
目录生成流程：
graph LR
  A[文章内容] --> B[提取标题]
  B --> C[生成ID]
  C --> D[构建树形结构]
  D --> E[渲染目录]

1.已实现的优化：
性能优化
文章缓存支持
图片懒加载
响应式设计
2.SEO优化
Meta标签支持
语义化HTML
标题自动ID
3.用户体验
深色模式支持
平滑滚动
交互动画
4.待优化点：
性能方面
实现预加载策略
添加分页支持
优化缓存策略
功能方面
添加文章搜索
实现文章推荐
添加评论系统
体验方面
添加进度指示
优化移动端体验
增强目录交互


### 步骤 5：分类和标签系统
- 5.1 【已完成✅】开发分类功能：
  - `app/routes/categories/index.tsx`：创建分类列表页，展示所有分类。
  - `app/routes/categories/$category.tsx`：实现分类文章页，根据分类显示相关的文章。
- 5.2 【已完成✅】实现标签系统：
  - `app/routes/tags/index.tsx`：设计标签云页面，展示热门标签。
  - `app/routes/tags/$tag.tsx`：创建标签文章页，显示与特定标签关联的文章。
- 5.3 【已完成✅】开发归档页面：
  - `app/routes/archive.tsx`：实现文章归档页，按日期或其他标准组织文章。

## 第三阶段：功能完善

### 步骤 6：搜索与主题 (2-3天)
- 关闭SSR，并进行程序适配
- 实现搜索功能：
  - `app/routes/search.tsx`：创建搜索页面，允许用户输入关键词搜索文章。
  - `app/components/search/SearchBar.tsx`：设计搜索栏组件，集成搜索输入和按钮。
  - 配置全文搜索引擎（如 Lunr 或 Algolia），确保文章内容可被搜索。
- 开发主题切换：
  - `app/hooks/useTheme.ts`：编写自定义 Hook，管理主题状态（如浅色模式和深色模式）。
  - `app/components/core/ThemeToggle.tsx`：创建主题切换组件，让用户在不同主题间切换。
  - `app/styles/theme.css`：定义不同主题的样式，确保切换流畅且样式一致。

### 步骤 7：SEO优化 (2天)
- 实现 SEO 功能：
  - `app/routes/sitemap.xml.tsx`：生成站点地图，帮助搜索引擎更好地索引网站内容。
  - `app/routes/robots.txt.tsx`：设置爬虫规则，指导搜索引擎爬取网站的哪些部分。
  - `app/components/core/Meta.tsx`：编写 Meta 标签组件，动态生成页面的 SEO 元数据，如标题、描述和关键词。

## 第四阶段：部署与优化 (3-4天)

### 步骤 8：部署配置 (2天)
- 配置 Cloudflare Pages：
  - `wrangler.toml`：设置 Workers 配置文件，定义部署参数和路由规则。
  - `_routes.json`：配置路由规则，确保请求正确地被重定向和处理。
- 设置自动部署：
  - `.github/workflows/deploy.yml`：编写 CI/CD 流程，配置 GitHub Actions 自动化部署到 Cloudflare Pages。

### 步骤 9：性能优化 (1-2天)
- 实现资源优化：
  - `app/lib/image.server.ts`：集成图片处理库（如 Sharp），优化图片大小和格式（如转换为 WebP）。
  - `app/lib/cache.server.ts`：制定缓存策略，对静态资源使用长缓存，对动态内容使用短缓存，提高访问速度。
- 配置性能监控：
  - `app/lib/performance.ts`：集成性能跟踪工具，监控页面加载时间和资源使用情况，确保持续优化用户体验。

```